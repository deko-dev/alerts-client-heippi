"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[54],{6054:(M,l,s)=>{s.r(l),s.d(l,{MainUsersModule:()=>C});var c=s(8583),g=s(8239),e=s(7716),u=s(4509),p=s(1584),d=s(8263);function v(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",12),e.TgZ(2,"h5",8),e._uU(3),e.qZA(),e.TgZ(4,"h6",13),e._uU(5),e.qZA(),e.TgZ(6,"h6",13),e._uU(7),e.qZA(),e.TgZ(8,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw().alert(r.id)}),e._UZ(9,"i",15),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,i=o.index;e.xp6(3),e.hij("Celular #",i,""),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.hij("Code: ",t.code,"")}}function f(n,o){1&n&&(e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"span",19),e._uU(3,"Loading..."),e.qZA(),e.qZA(),e.qZA())}function m(n,o){if(1&n&&(e.TgZ(0,"div",17),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("Tu codigo: ",t.UUID,"")}}function Z(n,o){if(1&n&&(e.TgZ(0,"div",16),e.YNc(1,f,4,0,"div",11),e.YNc(2,m,3,1,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",""===t.UUID),e.xp6(1),e.Q6J("ngIf",""!==t.UUID)}}function U(n,o){if(1&n&&(e.TgZ(0,"div",17),e.TgZ(1,"strong"),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.textAlert)}}let x=(()=>{class n{constructor(t,i,a){this.webSocketService=t,this.cookieService=i,this.swPush=a,this.isLoading=!1,this.UUID="",this.listDevices=[],this.textAlert="",this.VAPID_PUBLIC_KEY="BLpWrYjfdkphUVTEOlTjKg3InCo99o2-5cvLqiPZ83I6H0Djac-gvXW6AkKrQzXTxp0MEnZUa4GijosGoiKQYJc",this.webSocketService.devicesOut.subscribe(r=>{console.log(r),this.listDevices=r})}ngOnInit(){var t=this;return(0,g.Z)(function*(){try{const i=yield t.swPush.requestSubscription({serverPublicKey:t.VAPID_PUBLIC_KEY});console.log(i)}catch(i){throw new Error(i)}t.webSocketService.getSockets()})()}generarUUID(){return"_"+Math.random().toString(36).substr(2,9)}newDevie(){this.isLoading=!0,setTimeout(()=>{this.UUID=this.generarUUID()},2e3)}alert(t){this.webSocketService.sendAlert(t),console.log(t),this.textAlert=`Alerta Enviada al Dispositivo con Id: ${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.l),e.Y36(p.N),e.Y36(d.Mk))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-main-users"]],decls:13,vars:3,consts:[[1,"navbar","navbar-primary","bg-primary"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","https://heippi.com/wp-content/uploads/2020/01/Heippi-logo.png","alt","",1,"d-inline-block","align-text-top"],[1,"card-group","d-flex","flex-row","justify-content-between","align-items-center","flex-wrap","gap-2","mt-4"],["class","card w-25",4,"ngFor","ngForOf"],[1,"card","w-25"],[1,"card-body","d-flex","flex-column","justify-content-between","align-items-center","gap-1"],[1,"card-title"],[1,"fs-1","text-primary","fas","fa-plus-circle","pointer",3,"click"],["class","w-25 mx-auto","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],[1,"card-body","d-flex","flex-column","justify-content-between","align-items-start","gap-1"],[1,"card-subtitle","mb-2","text-muted"],[1,"btn","btn-primary","align-self-end",3,"click"],[1,"fas","fa-bell"],["role","alert",1,"w-25","mx-auto"],["role","alert",1,"alert","alert-success"],["role","status",1,"spinner-border"],[1,"visually-hidden"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0),e.TgZ(1,"div",1),e.TgZ(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,v,10,3,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"h5",8),e._uU(9,"Generar Codigo"),e.qZA(),e.TgZ(10,"i",9),e.NdJ("click",function(){return i.newDevie()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,Z,3,2,"div",10),e.YNc(12,U,3,1,"div",11)),2&t&&(e.xp6(5),e.Q6J("ngForOf",i.listDevices),e.xp6(6),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",""!==i.textAlert))},directives:[c.sg,c.O5],styles:[".card[_ngcontent-%COMP%]{flex:0 1 calc(25% - 10px)}button[_ngcontent-%COMP%], .pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var h=s(1102),T=s(5985);const A=[{path:"",component:x}];let C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,h.Bz.forChild(A),T.HB,d.Wr]]}),n})()}}]);